!function(){const e="edunet_settings",t={theme:"dark",fontSize:"medium",autoplayVideos:!0,dataSaver:!1};function a(){try{const a=localStorage.getItem(e);if(a)return{...t,...JSON.parse(a)}}catch(e){console.warn("Errore lettura preferenze:",e)}return t}const o=a();function r(e){const t=document.documentElement;if("dark"===e)t.classList.add("dark-theme"),t.style.setProperty("color-scheme","dark");else if("light"===e)t.classList.remove("dark-theme"),t.style.setProperty("color-scheme","light");else if("auto"===e){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;e?(t.classList.add("dark-theme"),t.style.setProperty("color-scheme","dark")):(t.classList.remove("dark-theme"),t.style.setProperty("color-scheme","light"))}document.body&&("dark"===e||"auto"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"))}function d(e){document.documentElement.setAttribute("data-font-size",e)}function s(e){e?document.documentElement.setAttribute("data-saver","true"):document.documentElement.removeAttribute("data-saver")}r(o.theme),d(o.fontSize),s(o.dataSaver),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",()=>r(o.theme)),window.EduNetPrefs={applyTheme:r,applyFontSize:d,applyDataSaver:s,get:()=>a(),save:t=>{const o=a(),n={...o,...t};localStorage.setItem(e,JSON.stringify(n)),t.theme&&r(t.theme),t.fontSize&&d(t.fontSize),void 0!==t.dataSaver&&s(t.dataSaver)}},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{const t=a();"auto"===t.theme&&r("auto")})}();